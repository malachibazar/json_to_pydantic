<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON to Pydantic Converter | Convert JSON to Pydantic Models</title>
    <meta
      name="description"
      content="Free online tool to convert JSON data into Python Pydantic models. Supports nested objects, date detection, camelCase conversion, and optional fields."
    />
    <meta
      name="keywords"
      content="JSON, Pydantic, Python, converter, FastAPI, data validation, model generation, camelCase, snake_case, JSON to Python"
    />
    <meta name="author" content="Malachi Bazar" />
    <meta name="robots" content="index, follow" />

    <!-- Google Analytics -->
    {% if google_analytics_id %}
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id={{ google_analytics_id }}"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "{{ google_analytics_id }}");
    </script>
    {% endif %}

    <!-- Canonical URL -->
    <link rel="canonical" href="https://jsontopydantic.dev" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://jsontopydantic.dev" />
    <meta property="og:title" content="JSON to Pydantic Converter" />
    <meta
      property="og:description"
      content="Free tool to convert JSON data into Python Pydantic models with smart type detection."
    />
    <meta
      property="og:image"
      content="{{ url_for('static', path='og-image.png') }}"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://jsontopydantic.dev" />
    <meta property="twitter:title" content="JSON to Pydantic Converter" />
    <meta
      property="twitter:description"
      content="Free tool to convert JSON data into Python Pydantic models with smart type detection."
    />
    <meta
      property="twitter:image"
      content="{{ url_for('static', path='og-image.png') }}"
    />

    <link
      rel="icon"
      href="{{ url_for('static', path='favicon.ico') }}"
      type="image/x-icon"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css"
    />
    <link rel="stylesheet" href="{{ url_for('static', path='style.css') }}">

    <!-- Structured Data (JSON-LD) for better SEO -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "JSON to Pydantic Converter",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Web",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "description": "A free tool that converts JSON data into Python Pydantic models. Features include support for nested structures, automatic date and datetime detection, camelCase to snake_case conversion, and optional fields.",
        "author": {
          "@type": "Person",
          "name": "Malachi Bazar"
        }
      }
    </script>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="title-container">
          <h1>JSON to Pydantic Converter</h1>
          <p>
            Paste your JSON on the left and get a generated Pydantic model on
            the right
          </p>
        </div>
      </header>

      <main>
        <div class="converter-container">
          <div id="jsonForm">
            <div class="row">
              <div class="col-md-6">
                <h2 class="h4">JSON Input</h2>
                <div class="code-container">
                  <textarea
                    id="jsonInput"
                    name="json_input"
                    aria-label="JSON Input"
                  ></textarea>
                </div>

                <div class="button-group">
                  <button type="button" id="generateButton" class="btn btn-primary">
                    Generate Pydantic Model
                  </button>
                  <button
                    type="button"
                    id="sampleJson"
                    class="btn btn-secondary"
                  >
                    Load Sample JSON
                  </button>
                </div>

                <div class="controls-area">
                  <div class="options-title">Generation Options:</div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="makeOptional"
                      name="make_optional"
                    />
                    <label class="form-check-label" for="makeOptional">
                      Make all fields optional
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="convertCamelCase"
                      name="convert_camel_case"
                    />
                    <label class="form-check-label" for="convertCamelCase">
                      Convert camelCase to snake_case with aliases
                    </label>
                  </div>
                </div>

                <div id="errorMessage" class="error-message" style="display: none;"></div>
              </div>
              <div class="col-md-6">
                <h2 class="h4">Pydantic Model</h2>
                <div class="code-container">
                  <textarea
                    id="pydanticOutput"
                    readonly
                    aria-label="Generated Pydantic Model"
                  ></textarea>
                </div>
                <button type="button" id="copyButton" class="btn btn-secondary">
                  Copy to Clipboard
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>

      <footer class="footer">
        <p>Built with FastAPI and Pydantic by Malachi Bazar</p>
        <div class="client-side-badge footer-badge">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z" />
          </svg>
          100% Client-Side Processing
        </div>
        <p>
          <a
            href="https://github.com/malachibazar/json_to_pydantic"
            target="_blank"
            rel="noopener"
            >View on GitHub</a
          >
        </p>
      </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    <script src="{{ url_for('static', path='js/converter.js') }}"></script>
    <script>
      // Initialize CodeMirror for JSON input
      const jsonEditor = CodeMirror.fromTextArea(
        document.getElementById("jsonInput"),
        {
          mode: "application/json",
          theme: "dracula",
          lineNumbers: true,
          matchBrackets: true,
          autoCloseBrackets: true,
          tabSize: 2,
          lineWrapping: true,
        }
      );

      // Initialize CodeMirror for Pydantic output
      const pydanticEditor = CodeMirror.fromTextArea(
        document.getElementById("pydanticOutput"),
        {
          mode: "python",
          theme: "dracula",
          lineNumbers: true,
          readOnly: true,
          lineWrapping: true,
        }
      );

      // Generate button handler
      document
        .getElementById("generateButton")
        .addEventListener("click", function () {
          const jsonStr = jsonEditor.getValue();
          const makeOptional = document.getElementById("makeOptional").checked;
          const convertCamelCase = document.getElementById("convertCamelCase").checked;
          const errorDiv = document.getElementById("errorMessage");
          
          errorDiv.style.display = "none";
          errorDiv.textContent = "";

          if (!jsonStr.trim()) {
            errorDiv.textContent = "Please enter some JSON";
            errorDiv.style.display = "block";
            return;
          }

          try {
            const jsonData = JSON.parse(jsonStr);
            if (typeof jsonData !== 'object' || jsonData === null) {
               throw new Error("Input JSON must be an object/dictionary");
            }
            
            const pydanticModel = generatePydanticModel(
                jsonData, 
                "MyModel", 
                null, 
                makeOptional, 
                convertCamelCase
            );
            
            pydanticEditor.setValue(pydanticModel);
          } catch (e) {
            errorDiv.textContent = "Invalid JSON format: " + e.message;
            errorDiv.style.display = "block";
            pydanticEditor.setValue("");
          }
        });

      // Copy to clipboard functionality
      document
        .getElementById("copyButton")
        .addEventListener("click", function () {
          const code = pydanticEditor.getValue();
          if (code) {
            navigator.clipboard
              .writeText(code)
              .then(() => {
                const originalText = this.textContent;
                this.textContent = "Copied!";
                setTimeout(() => {
                  this.textContent = originalText;
                }, 2000);
              })
              .catch((err) => {
                console.error("Could not copy text: ", err);
              });
          }
        });

      // Sample JSON functionality
      document
        .getElementById("sampleJson")
        .addEventListener("click", function () {
          const sampleJson = {
            userId: 1234,
            userName: "johndoe",
            userEmail: "john@example.com",
            isActive: true,
            userProfile: {
              fullName: "John Doe",
              userBio: "Software developer",
              ageInYears: 30,
              userInterests: ["coding", "hiking", "reading"],
            },
            userPosts: [
              {
                postId: 1,
                postTitle: "Hello World",
                postContent: "This is my first post",
                postTags: ["programming", "intro"],
              },
              {
                postId: 2,
                postTitle: "Pydantic is awesome",
                postContent: "Here's why I love Pydantic",
                postTags: ["python", "pydantic", "coding"],
              },
            ],
            lastLoginTime: "2023-01-15T14:30:45Z",
            createdDate: "2023-01-01",
            metaData: null,
          };
          jsonEditor.setValue(JSON.stringify(sampleJson, null, 2));
        });
    </script>
  </body>
</html>
